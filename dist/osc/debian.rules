#!/usr/bin/make -f

# CMake stages to a path without the revision suffix. Strip that so dh_dkms finds the right path and config.
UPSTREAM_VERSION := $(shell dpkg-parsechangelog -S Version | sed 's/-[^-]*$$//')

%:
	dh $@ --with dkms

override_dh_auto_configure:
	dh_auto_configure -- -DCMAKE_BUILD_TYPE=Release

override_dh_auto_install:
	dh_auto_install --destdir=debian/tmp

override_dh_installsystemd:
	dh_installsystemd --name=curves-mouse-acceleration-restore

override_dh_dkms:
	dh_dkms -- debian/tmp/usr/src/curves-mouse-acceleration-$(UPSTREAM_VERSION)/dkms.conf

override_dh_auto_test:
